# ===========================================
# WhatsApp News Bot - Server Configuration
# ===========================================

# Supabase (REQUIRED)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Server
PORT=3001

# JSON body limits (optional)
# Keep the default small; only a few endpoints (like /api/whatsapp/send-test) should accept large payloads.
# JSON_BODY_LIMIT_DEFAULT=2mb
# JSON_BODY_LIMIT_LARGE=50mb

# Access control
# In production this defaults to enabled unless REQUIRE_BASIC_AUTH=false
REQUIRE_BASIC_AUTH=true
BASIC_AUTH_USER=admin
BASIC_AUTH_PASS=change-me
# Optional auth realm shown by browser prompt
# BASIC_AUTH_REALM=WhatsApp News Bot
# Require HTTPS for authenticated routes (default true in production)
# BASIC_AUTH_REQUIRE_HTTPS=true
# Emergency override for weak/basic placeholder passwords (NOT recommended)
# ALLOW_WEAK_BASIC_AUTH=false
# Optional: comma-separated client IP allowlist. Leave empty to allow any IP with credentials.
# Supports exact IPs and IPv4 CIDR ranges.
# ACCESS_ALLOWLIST=203.0.113.10,198.51.100.0/24
# Reverse proxy hops to trust for client IP extraction (Render usually 1)
# TRUST_PROXY_HOPS=1
# Optional auth throttling
# BASIC_AUTH_MAX_ATTEMPTS=20
# BASIC_AUTH_BLOCK_MINUTES=15
# HSTS header max age (seconds) in production HTTPS
# HSTS_MAX_AGE_SECONDS=15552000

# WhatsApp Lease System
# Set to 'true' to completely disable lease (for local dev)
# SKIP_WHATSAPP_LEASE=true
# Optional: auto-takeover the lease on startup (not recommended when multiple instances can overlap).
# Default is false; use POST /api/whatsapp/takeover when you explicitly want to force a takeover.
# WHATSAPP_LEASE_AUTO_TAKEOVER=true
# Session key used in auth_state row.
# Use "primary" on Render/production, and a different value locally (for example "local")
# to avoid local-vs-production lease conflicts.
# WHATSAPP_SESSION_ID=local

# Shabbos Mode (optional)
# SHABBOS_MODE=true
# SHABBOS_LOCATION=Jerusalem

# Post-send update windows (optional)
# WhatsApp native edit window is typically short; keep this low.
# POST_SEND_EDIT_WINDOW_MINUTES=15
# Correction attempt window after initial send (kept within WhatsApp edit limit).
# POST_SEND_CORRECTION_WINDOW_MINUTES=15
